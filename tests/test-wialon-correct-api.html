<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç Wialon API - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .status {
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      font-weight: 500;
    }

    .status.loading {
      background: #e0f2fe;
      color: #0277bd;
      border: 1px solid #81d4fa;
    }

    .status.success {
      background: #e8f5e8;
      color: #2e7d32;
      border: 1px solid #81c784;
    }

    .status.error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #ef9a9a;
    }

    .info-block {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #2196f3;
    }

    .warning-block {
      background: #fff3cd;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #ffc107;
      color: #856404;
    }

    .btn {
      background: #007bff;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
      font-weight: 500;
    }

    .btn:hover {
      background: #0056b3;
    }

    .btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .btn.success {
      background: #28a745;
    }

    .btn.large {
      padding: 15px 30px;
      font-size: 16px;
    }

    .token-info {
      background: #d4edda;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #28a745;
    }

    .api-test {
      background: #f8f9fa;
      padding: 15px;
      margin: 10px 0;
      border-radius: 6px;
      border-left: 3px solid #007bff;
    }

    .api-test.success {
      border-left-color: #28a745;
      background: #d4edda;
    }

    .api-test.error {
      border-left-color: #dc3545;
      background: #f8d7da;
    }

    .code-block {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 12px;
      margin: 10px 0;
      border: 1px solid #dee2e6;
    }

    .vehicle-list {
      margin-top: 20px;
      max-height: 400px;
      overflow-y: auto;
    }

    .vehicle-item {
      background: #f8f9fa;
      padding: 12px;
      margin: 8px 0;
      border-radius: 4px;
      border-left: 3px solid #28a745;
    }

    .vehicle-offline {
      border-left-color: #dc3545;
    }

    .vehicle-moving {
      border-left-color: #28a745;
    }

    .vehicle-stopped {
      border-left-color: #ffc107;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üîë –¢–µ—Å—Ç Wialon API - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h1>
    
    <div class="token-info">
      <strong>‚úÖ –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</strong><br>
      <small>–°–µ—Ä–≤–µ—Ä: https://176.74.220.111/</small><br>
      <small>–¢–æ–∫–µ–Ω: 85991e5f06896e98fe3c0bd49d2fe6d8EC2B0F5F2A7A963F0EC0B869EB87FF8188C6EE8D</small><br>
      <small>API URL: https://176.74.220.111/wialon/ajax.html</small>
    </div>

    <div class="info-block">
      <strong>üìö –°–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Wialon SDK:</strong><br>
      ‚Ä¢ API URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: <code>{host}/wialon/ajax.html</code><br>
      ‚Ä¢ –ú–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: <code>token/login</code><br>
      ‚Ä¢ –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 72-—Å–∏–º–≤–æ–ª—å–Ω—ã–º<br>
      ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: <a href="https://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/login/login" target="_blank">sdk.wialon.com</a>
    </div>

    <div class="warning-block">
      <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ <code>core/login</code> –±—ã–ª –æ—Ç–º–µ–Ω–µ–Ω —Å 01 –æ–∫—Ç—è–±—Ä—è 2015 –≥–æ–¥–∞. 
      –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ oAuth.
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div style="text-align: center; margin: 20px 0;">
      <button class="btn large success" onclick="testCorrectAPI()">üöÄ –¢–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º API</button>
      <button class="btn" onclick="testHTTPS()">üîí –¢–µ—Å—Ç HTTPS</button>
      <button class="btn" onclick="testHTTP()">üåê –¢–µ—Å—Ç HTTP</button>
      <button class="btn" onclick="getVehicles()" id="vehiclesBtn" disabled>üöå –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</button>
      <button class="btn" onclick="clearResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>

    <!-- –¢–µ—Å—Ç—ã API -->
    <div id="apiTests">
      <div class="api-test" id="test-https">
        <strong>–¢–µ—Å—Ç 1: HTTPS API</strong>
        <div class="code-block">URL: https://176.74.220.111/wialon/ajax.html?svc=token/login</div>
        <div id="result-https"></div>
      </div>
      
      <div class="api-test" id="test-http">
        <strong>–¢–µ—Å—Ç 2: HTTP API</strong>
        <div class="code-block">URL: http://176.74.220.111/wialon/ajax.html?svc=token/login</div>
        <div id="result-http"></div>
      </div>
      
      <div class="api-test" id="test-cors">
        <strong>–¢–µ—Å—Ç 3: CORS –ø—Ä–æ–≤–µ—Ä–∫–∞</strong>
        <div class="code-block">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ CORS –ø–æ–ª–∏—Ç–∏–∫</div>
        <div id="result-cors"></div>
      </div>
    </div>

    <!-- –°—Ç–∞—Ç—É—Å -->
    <div id="status"></div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
    <div id="results"></div>

    <!-- –õ–æ–≥–∏ -->
    <div id="log"></div>
  </div>

  <script>
    const serverHost = '176.74.220.111';
    const token = '85991e5f06896e98fe3c0bd49d2fe6d8EC2B0F5F2A7A963F0EC0B869EB87FF8188C6EE8D';
    let session = null;
    let vehicles = [];

    function log(message, type = 'info') {
      const logDiv = document.getElementById('log');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
      logEntry.style.margin = '2px 0';
      logEntry.style.padding = '3px';
      logEntry.style.borderRadius = '3px';
      logEntry.style.fontSize = '12px';

      switch (type) {
        case 'error':
          logEntry.style.background = '#ffebee';
          logEntry.style.color = '#c62828';
          break;
        case 'success':
          logEntry.style.background = '#e8f5e8';
          logEntry.style.color = '#2e7d32';
          break;
        default:
          logEntry.style.background = '#f8f9fa';
          logEntry.style.color = '#495057';
      }

      logDiv.appendChild(logEntry);
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function showStatus(message, type) {
      const statusDiv = document.getElementById('status');
      statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
    }

    function updateTestResult(testId, status, message) {
      const testDiv = document.getElementById(testId);
      const resultDiv = document.getElementById(`result-${testId.split('-')[1]}`);
      
      testDiv.className = `api-test ${status}`;
      resultDiv.innerHTML = `<small>${message}</small>`;
    }

    // –¢–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º API —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
    async function testCorrectAPI() {
      log('=== –¢–ï–°–¢ –ü–†–ê–í–ò–õ–¨–ù–û–ì–û API –°–û–ì–õ–ê–°–ù–û –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò ===');
      showStatus('üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ API...', 'loading');

      // –°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º HTTPS
      await testHTTPS();
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // –ó–∞—Ç–µ–º HTTP –µ—Å–ª–∏ HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
      if (!session) {
        await testHTTP();
      }
    }

    // –¢–µ—Å—Ç HTTPS API
    async function testHTTPS() {
      const apiUrl = `https://${serverHost}/wialon/ajax.html`;
      log(`–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTPS API: ${apiUrl}`);
      updateTestResult('test-https', 'loading', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...');

      try {
        const response = await fetch(`${apiUrl}?svc=token/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `params=${JSON.stringify({ token: token })}`
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        
        if (data.error) {
          throw new Error(`Wialon Error: ${data.error}`);
        }

        session = {
          sid: data.eid,
          userId: data.user?.id || 0,
          userName: data.user?.nm || 'Unknown',
          apiUrl: apiUrl
        };

        updateTestResult('test-https', 'success', `‚úÖ –£—Å–ø–µ—Ö! SID: ${session.sid}, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${session.userName}`);
        log(`‚úÖ HTTPS API —Ä–∞–±–æ—Ç–∞–µ—Ç! SID: ${session.sid}`, 'success');
        showStatus(`‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ HTTPS —É—Å–ø–µ—à–Ω–æ! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${session.userName}`, 'success');
        
        document.getElementById('vehiclesBtn').disabled = false;
        return true;

      } catch (error) {
        updateTestResult('test-https', 'error', `‚ùå ${error.message}`);
        log(`‚ùå HTTPS API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${error.message}`, 'error');
        return false;
      }
    }

    // –¢–µ—Å—Ç HTTP API
    async function testHTTP() {
      const apiUrl = `http://${serverHost}/wialon/ajax.html`;
      log(`–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP API: ${apiUrl}`);
      updateTestResult('test-http', 'loading', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...');

      try {
        const response = await fetch(`${apiUrl}?svc=token/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `params=${JSON.stringify({ token: token })}`
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        
        if (data.error) {
          throw new Error(`Wialon Error: ${data.error}`);
        }

        session = {
          sid: data.eid,
          userId: data.user?.id || 0,
          userName: data.user?.nm || 'Unknown',
          apiUrl: apiUrl
        };

        updateTestResult('test-http', 'success', `‚úÖ –£—Å–ø–µ—Ö! SID: ${session.sid}, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${session.userName}`);
        log(`‚úÖ HTTP API —Ä–∞–±–æ—Ç–∞–µ—Ç! SID: ${session.sid}`, 'success');
        showStatus(`‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ HTTP —É—Å–ø–µ—à–Ω–æ! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${session.userName}`, 'success');
        
        document.getElementById('vehiclesBtn').disabled = false;
        return true;

      } catch (error) {
        updateTestResult('test-http', 'error', `‚ùå ${error.message}`);
        log(`‚ùå HTTP API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${error.message}`, 'error');
        
        if (!session) {
          showStatus(`‚ùå –û–±–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç: ${error.message}`, 'error');
        }
        return false;
      }
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    async function getVehicles() {
      if (!session) {
        showStatus('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é', 'error');
        return;
      }

      log('=== –ü–û–õ–£–ß–ï–ù–ò–ï –°–ü–ò–°–ö–ê –¢–†–ê–ù–°–ü–û–†–¢–ê ===');
      showStatus('üöå –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞...', 'loading');

      try {
        const response = await fetch(`${session.apiUrl}?svc=core/search_items&sid=${session.sid}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `params=${JSON.stringify({
            spec: {
              itemsType: 'avl_unit',
              propName: 'sys_name',
              propValueMask: '*',
              sortType: 'sys_name'
            },
            force: 1,
            flags: 0x1,
            from: 0,
            to: 0
          })}`
        });

        const data = await response.json();
        
        if (data.error) {
          throw new Error(data.error);
        }

        vehicles = data.items || [];
        log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤: ${vehicles.length}`, 'success');

        if (vehicles.length === 0) {
          showStatus('‚ö†Ô∏è –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
          return;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏
        await updateVehiclePositions();
        displayVehicles();
        showStatus(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vehicles.length} —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤`, 'success');

      } catch (error) {
        log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
        showStatus(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    async function updateVehiclePositions() {
      if (!vehicles.length || !session) return;

      try {
        log('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞...');
        
        const vehicleIds = vehicles.map(v => v.id);
        const response = await fetch(`${session.apiUrl}?svc=core/update_data_flags&sid=${session.sid}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `params=${JSON.stringify({
            spec: vehicleIds.map(id => ({
              type: 'id',
              data: id,
              flags: 0x1 | 0x2
            }))
          })}`
        });

        const data = await response.json();
        log('‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'success');

      } catch (error) {
        log(`‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π: ${error.message}`, 'error');
      }
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    function displayVehicles() {
      const resultsDiv = document.getElementById('results');
      
      if (!vehicles.length) {
        resultsDiv.innerHTML = '';
        return;
      }

      let html = '<h3>üöå –í–∞—à —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç:</h3><div class="vehicle-list">';
      const now = Math.floor(Date.now() / 1000);

      let online = 0, moving = 0, stopped = 0;

      vehicles.forEach(vehicle => {
        const pos = vehicle.pos;
        const isOnline = pos && (now - pos.t) < 600;
        const speed = pos?.s || 0;
        let status = '–û—Ñ—Ñ–ª–∞–π–Ω';
        let statusClass = 'vehicle-offline';
        
        if (isOnline) {
          online++;
          if (speed > 5) {
            status = '–í –¥–≤–∏–∂–µ–Ω–∏–∏';
            statusClass = 'vehicle-moving';
            moving++;
          } else {
            status = '–û—Å—Ç–∞–Ω–æ–≤–∫–∞';
            statusClass = 'vehicle-stopped';
            stopped++;
          }
        }

        html += `
          <div class="vehicle-item ${statusClass}">
            <strong>${vehicle.nm || `–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç ${vehicle.id}`}</strong><br>
            <small>
              ID: ${vehicle.id} | –°—Ç–∞—Ç—É—Å: ${status} | –°–∫–æ—Ä–æ—Å—Ç—å: ${speed} –∫–º/—á<br>
              ${pos ? `–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${pos.y?.toFixed(6)}, ${pos.x?.toFixed(6)}` : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∑–∏—Ü–∏–∏'}<br>
              ${pos ? `–û–±–Ω–æ–≤–ª–µ–Ω–æ: ${new Date(pos.t * 1000).toLocaleString()}` : ''}
            </small>
          </div>
        `;
      });

      html += '</div>';
      
      // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      html += `
        <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 6px;">
          <strong>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong><br>
          <small>
            –í—Å–µ–≥–æ: ${vehicles.length} | 
            –û–Ω–ª–∞–π–Ω: ${online} | 
            –í –¥–≤–∏–∂–µ–Ω–∏–∏: ${moving} | 
            –û—Å—Ç–∞–Ω–æ–≤–∫–∞: ${stopped} | 
            –û—Ñ—Ñ–ª–∞–π–Ω: ${vehicles.length - online}
          </small>
        </div>
      `;
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
      html += `
        <div style="margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 6px;">
          <strong>‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!</strong><br>
          <small>API: ${session.apiUrl}</small><br>
          <small>SID: ${session.sid}</small><br>
          <small>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${session.userName}</small>
        </div>
      `;
      
      resultsDiv.innerHTML = html;
    }

    // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    function clearResults() {
      document.getElementById('results').innerHTML = '';
      document.getElementById('log').innerHTML = '';
      document.getElementById('status').innerHTML = '';
      document.getElementById('vehiclesBtn').disabled = true;
      
      // –°–±—Ä–æ—Å —Ç–µ—Å—Ç–æ–≤
      ['test-https', 'test-http', 'test-cors'].forEach(testId => {
        document.getElementById(testId).className = 'api-test';
        document.getElementById(`result-${testId.split('-')[1]}`).innerHTML = '';
      });
      
      session = null;
      vehicles = [];
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.onload = function() {
      log('üîë –¢–µ—Å—Ç Wialon API —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤!');
      log(`–°–µ—Ä–≤–µ—Ä: https://${serverHost}/`);
      log(`–¢–æ–∫–µ–Ω: ${token.substring(0, 30)}...`);
      log('–ù–∞–∂–º–∏—Ç–µ "–¢–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º API" –¥–ª—è –Ω–∞—á–∞–ª–∞');
    };
  </script>
</body>

</html>
