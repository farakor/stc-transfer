<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ Wialon</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .server-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .server-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #dee2e6;
    }

    .server-card.active {
      border-color: #007bff;
      background: #e3f2fd;
    }

    .server-card.success {
      border-color: #28a745;
      background: #d4edda;
    }

    .server-card.error {
      border-color: #dc3545;
      background: #f8d7da;
    }

    .btn {
      background: #007bff;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
      font-weight: 500;
      width: 100%;
    }

    .btn:hover {
      background: #0056b3;
    }

    .btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .btn.success {
      background: #28a745;
    }

    .btn.large {
      padding: 15px 30px;
      font-size: 16px;
    }

    .status {
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      font-size: 12px;
    }

    .status.loading {
      background: #fff3cd;
      color: #856404;
    }

    .status.success {
      background: #d4edda;
      color: #155724;
    }

    .status.error {
      background: #f8d7da;
      color: #721c24;
    }

    .code-block {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 11px;
      margin: 10px 0;
      border: 1px solid #dee2e6;
      word-break: break-all;
    }

    .info-block {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #2196f3;
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .comparison-table th,
    .comparison-table td {
      border: 1px solid #dee2e6;
      padding: 12px;
      text-align: left;
    }

    .comparison-table th {
      background: #f8f9fa;
      font-weight: 600;
    }

    .comparison-table .success {
      background: #d4edda;
      color: #155724;
    }

    .comparison-table .error {
      background: #f8d7da;
      color: #721c24;
    }

    .comparison-table .pending {
      background: #fff3cd;
      color: #856404;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ Wialon</h1>
    
    <div class="info-block">
      <strong>üéØ –¶–µ–ª—å:</strong> –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º<br>
      <strong>üìã –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å–µ—Ä–≤–µ—Ä—ã:</strong><br>
      ‚Ä¢ <code>176.74.220.111</code> - IP —Å–µ—Ä–≤–µ—Ä<br>
      ‚Ä¢ <code>gps.ent-en.com</code> - –¥–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä<br>
      <strong>üîë –¢–æ–∫–µ–Ω:</strong> <code>85991e5f06896e98fe3c0bd49d2fe6d8EC2B0F5F2A7A963F0EC0B869EB87FF8188C6EE8D</code>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div style="text-align: center; margin: 20px 0;">
      <button class="btn large success" onclick="testBothServers()">üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞</button>
      <button class="btn" onclick="clearResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
    </div>

    <!-- –°–µ—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ -->
    <div class="server-grid">
      <!-- –°–µ—Ä–≤–µ—Ä 1: IP -->
      <div class="server-card" id="server-ip">
        <h3>üñ•Ô∏è IP –°–µ—Ä–≤–µ—Ä: 176.74.220.111</h3>
        <div class="code-block">https://176.74.220.111/wialon/ajax.html</div>
        <div class="status" id="status-ip">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</div>
        <button class="btn" onclick="testIpServer()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä</button>
        <div id="result-ip"></div>
      </div>

      <!-- –°–µ—Ä–≤–µ—Ä 2: –î–æ–º–µ–Ω -->
      <div class="server-card" id="server-domain">
        <h3>üåê –î–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: gps.ent-en.com</h3>
        <div class="code-block">https://gps.ent-en.com/wialon/ajax.html</div>
        <div class="status" id="status-domain">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</div>
        <button class="btn" onclick="testDomainServer()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä</button>
        <div id="result-domain"></div>
      </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
    <table class="comparison-table">
      <thead>
        <tr>
          <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
          <th>176.74.220.111</th>
          <th>gps.ent-en.com</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>HTTPS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</td>
          <td class="pending" id="compare-ip-https">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
          <td class="pending" id="compare-domain-https">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
        </tr>
        <tr>
          <td>HTTP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</td>
          <td class="pending" id="compare-ip-http">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
          <td class="pending" id="compare-domain-http">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
        </tr>
        <tr>
          <td>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</td>
          <td class="pending" id="compare-ip-auth">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
          <td class="pending" id="compare-domain-auth">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
        </tr>
        <tr>
          <td>–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</td>
          <td class="pending" id="compare-ip-vehicles">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
          <td class="pending" id="compare-domain-vehicles">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
        </tr>
        <tr>
          <td>–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞</td>
          <td class="pending" id="compare-ip-speed">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
          <td class="pending" id="compare-domain-speed">–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å</td>
        </tr>
      </tbody>
    </table>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è -->
    <div id="recommendation" style="display: none;"></div>

    <!-- –õ–æ–≥–∏ -->
    <div id="log"></div>
  </div>

  <script>
    const token = '85991e5f06896e98fe3c0bd49d2fe6d8EC2B0F5F2A7A963F0EC0B869EB87FF8188C6EE8D';
    const servers = {
      ip: {
        name: '176.74.220.111',
        urls: [
          'https://176.74.220.111/wialon/ajax.html',
          'http://176.74.220.111/wialon/ajax.html'
        ],
        results: {}
      },
      domain: {
        name: 'gps.ent-en.com',
        urls: [
          'https://gps.ent-en.com/wialon/ajax.html',
          'http://gps.ent-en.com/wialon/ajax.html'
        ],
        results: {}
      }
    };

    function log(message, type = 'info') {
      const logDiv = document.getElementById('log');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
      logEntry.style.margin = '2px 0';
      logEntry.style.padding = '3px';
      logEntry.style.borderRadius = '3px';
      logEntry.style.fontSize = '12px';

      switch (type) {
        case 'error':
          logEntry.style.background = '#ffebee';
          logEntry.style.color = '#c62828';
          break;
        case 'success':
          logEntry.style.background = '#e8f5e8';
          logEntry.style.color = '#2e7d32';
          break;
        default:
          logEntry.style.background = '#f8f9fa';
          logEntry.style.color = '#495057';
      }

      logDiv.appendChild(logEntry);
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function updateServerStatus(serverId, status, message) {
      const serverCard = document.getElementById(`server-${serverId}`);
      const statusDiv = document.getElementById(`status-${serverId}`);
      
      serverCard.className = `server-card ${status}`;
      statusDiv.className = `status ${status}`;
      statusDiv.textContent = message;
    }

    function updateComparison(serverId, param, status, value) {
      const cell = document.getElementById(`compare-${serverId}-${param}`);
      cell.className = status;
      cell.textContent = value;
    }

    async function testServer(serverId, serverConfig) {
      log(`=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–ï–†–í–ï–†–ê ${serverConfig.name.toUpperCase()} ===`);
      updateServerStatus(serverId, 'active', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...');
      
      const results = {
        https: false,
        http: false,
        auth: false,
        vehicles: false,
        speed: 0,
        session: null
      };

      // –¢–µ—Å—Ç–∏—Ä—É–µ–º HTTPS
      const httpsStart = Date.now();
      try {
        const response = await fetch(`${serverConfig.urls[0]}?svc=token/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `params=${JSON.stringify({ token: token })}`
        });

        if (response.ok) {
          const data = await response.json();
          if (!data.error) {
            results.https = true;
            results.auth = true;
            results.speed = Date.now() - httpsStart;
            results.session = {
              sid: data.eid,
              userName: data.user?.nm || 'Unknown',
              apiUrl: serverConfig.urls[0]
            };
            log(`‚úÖ ${serverConfig.name} HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç! SID: ${results.session.sid}`, 'success');
          }
        }
      } catch (error) {
        log(`‚ùå ${serverConfig.name} HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${error.message}`, 'error');
      }

      // –ï—Å–ª–∏ HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–µ—Å—Ç–∏—Ä—É–µ–º HTTP
      if (!results.https) {
        const httpStart = Date.now();
        try {
          const response = await fetch(`${serverConfig.urls[1]}?svc=token/login`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `params=${JSON.stringify({ token: token })}`
          });

          if (response.ok) {
            const data = await response.json();
            if (!data.error) {
              results.http = true;
              results.auth = true;
              results.speed = Date.now() - httpStart;
              results.session = {
                sid: data.eid,
                userName: data.user?.nm || 'Unknown',
                apiUrl: serverConfig.urls[1]
              };
              log(`‚úÖ ${serverConfig.name} HTTP —Ä–∞–±–æ—Ç–∞–µ—Ç! SID: ${results.session.sid}`, 'success');
            }
          }
        } catch (error) {
          log(`‚ùå ${serverConfig.name} HTTP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${error.message}`, 'error');
        }
      }

      // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
      if (results.session) {
        try {
          const response = await fetch(`${results.session.apiUrl}?svc=core/search_items&sid=${results.session.sid}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `params=${JSON.stringify({
              spec: {
                itemsType: 'avl_unit',
                propName: 'sys_name',
                propValueMask: '*',
                sortType: 'sys_name'
              },
              force: 1,
              flags: 0x1,
              from: 0,
              to: 0
            })}`
          });

          const data = await response.json();
          if (!data.error) {
            results.vehicles = true;
            results.vehicleCount = data.items?.length || 0;
            log(`‚úÖ ${serverConfig.name} —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ø–æ–ª—É—á–µ–Ω: ${results.vehicleCount} –µ–¥–∏–Ω–∏—Ü`, 'success');
          }
        } catch (error) {
          log(`‚ùå ${serverConfig.name} –æ—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: ${error.message}`, 'error');
        }
      }

      // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      servers[serverId].results = results;
      updateComparisonTable(serverId, results);

      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
      if (results.auth) {
        updateServerStatus(serverId, 'success', `‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${results.session.userName}`);
        document.getElementById(`result-${serverId}`).innerHTML = `
          <div style="margin-top: 10px; font-size: 12px;">
            <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</strong><br>
            ‚Ä¢ HTTPS: ${results.https ? '‚úÖ' : '‚ùå'}<br>
            ‚Ä¢ HTTP: ${results.http ? '‚úÖ' : '‚ùå'}<br>
            ‚Ä¢ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: ${results.vehicles ? `‚úÖ (${results.vehicleCount})` : '‚ùå'}<br>
            ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å: ${results.speed}–º—Å
          </div>
        `;
      } else {
        updateServerStatus(serverId, 'error', '‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç');
        document.getElementById(`result-${serverId}`).innerHTML = `
          <div style="margin-top: 10px; font-size: 12px; color: #721c24;">
            –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å
          </div>
        `;
      }

      return results;
    }

    function updateComparisonTable(serverId, results) {
      updateComparison(serverId, 'https', results.https ? 'success' : 'error', results.https ? '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç' : '‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç');
      updateComparison(serverId, 'http', results.http ? 'success' : 'error', results.http ? '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç' : '‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç');
      updateComparison(serverId, 'auth', results.auth ? 'success' : 'error', results.auth ? '‚úÖ –£—Å–ø–µ—à–Ω–æ' : '‚ùå –û—à–∏–±–∫–∞');
      updateComparison(serverId, 'vehicles', results.vehicles ? 'success' : 'error', results.vehicles ? `‚úÖ ${results.vehicleCount || 0} –µ–¥–∏–Ω–∏—Ü` : '‚ùå –û—à–∏–±–∫–∞');
      updateComparison(serverId, 'speed', results.speed > 0 ? 'success' : 'error', results.speed > 0 ? `${results.speed}–º—Å` : '–ù/–î');
    }

    function showRecommendation() {
      const ipResults = servers.ip.results;
      const domainResults = servers.domain.results;
      
      let recommendation = '';
      let recommendedServer = null;

      if (ipResults.auth && domainResults.auth) {
        // –û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç - –≤—ã–±–∏—Ä–∞–µ–º –ª—É—á—à–∏–π
        if (ipResults.speed < domainResults.speed) {
          recommendedServer = 'IP —Å–µ—Ä–≤–µ—Ä (176.74.220.111)';
          recommendation = `üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä (176.74.220.111) - –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ ${domainResults.speed - ipResults.speed}–º—Å`;
        } else {
          recommendedServer = '–î–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (gps.ent-en.com)';
          recommendation = `üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (gps.ent-en.com) - –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ ${ipResults.speed - domainResults.speed}–º—Å`;
        }
      } else if (ipResults.auth) {
        recommendedServer = 'IP —Å–µ—Ä–≤–µ—Ä (176.74.220.111)';
        recommendation = 'üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä (176.74.220.111) - —Ç–æ–ª—å–∫–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç';
      } else if (domainResults.auth) {
        recommendedServer = '–î–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (gps.ent-en.com)';
        recommendation = 'üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (gps.ent-en.com) - —Ç–æ–ª—å–∫–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç';
      } else {
        recommendation = '‚ùå –ù–∏ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º';
      }

      const recDiv = document.getElementById('recommendation');
      recDiv.style.display = 'block';
      recDiv.innerHTML = `
        <div style="padding: 20px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3; margin: 20px 0;">
          <h3>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</h3>
          <p><strong>${recommendation}</strong></p>
          ${recommendedServer ? `
            <div style="margin-top: 15px; padding: 10px; background: #d4edda; border-radius: 4px;">
              <strong>–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</strong><br>
              –ò–∑–º–µ–Ω–∏—Ç–µ <code>baseUrl</code> –≤ <code>frontend/src/config/wialon.config.ts</code> –Ω–∞:<br>
              <code>${recommendedServer.includes('IP') ? 'https://176.74.220.111/wialon' : 'https://gps.ent-en.com/wialon'}</code>
            </div>
          ` : ''}
        </div>
      `;
    }

    async function testIpServer() {
      await testServer('ip', servers.ip);
    }

    async function testDomainServer() {
      await testServer('domain', servers.domain);
    }

    async function testBothServers() {
      log('=== –ù–ê–ß–ê–õ–û –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø ===');
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      Object.keys(servers).forEach(serverId => {
        servers[serverId].results = {};
        updateServerStatus(serverId, '', '–û–∂–∏–¥–∞–Ω–∏–µ...');
        document.getElementById(`result-${serverId}`).innerHTML = '';
      });

      // –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞
      await testIpServer();
      await new Promise(resolve => setTimeout(resolve, 1000));
      await testDomainServer();
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
      showRecommendation();
      
      log('=== –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û ===', 'success');
    }

    function clearResults() {
      document.getElementById('log').innerHTML = '';
      document.getElementById('recommendation').style.display = 'none';
      
      Object.keys(servers).forEach(serverId => {
        servers[serverId].results = {};
        updateServerStatus(serverId, '', '–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
        document.getElementById(`result-${serverId}`).innerHTML = '';
        
        // –°–±—Ä–æ—Å —Ç–∞–±–ª–∏—Ü—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        ['https', 'http', 'auth', 'vehicles', 'speed'].forEach(param => {
          updateComparison(serverId, param, 'pending', '–ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å');
        });
      });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.onload = function() {
      log('üîÑ –°–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ Wialon –≥–æ—Ç–æ–≤–∞!');
      log(`–¢–æ–∫–µ–Ω: ${token.substring(0, 30)}...`);
      log('–ù–∞–∂–º–∏—Ç–µ "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è');
    };
  </script>
</body>

</html>
