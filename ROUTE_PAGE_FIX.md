# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ `http://localhost:3003/route` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –ª–æ–∫–∞—Ü–∏–π.

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

### **–•–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ API:**
```typescript
// ‚ùå –ë–´–õ–û: –•–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –ª–æ–∫–∞—Ü–∏–π
const FROM_LOCATIONS = [
  'Hilton Samarkand Regency',
  'Silk Road by Minyoun',
  // ... 13 —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
]

const TO_LOCATIONS = [
  'Hilton Samarkand Regency',
  // ... 22 —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–∏
]
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π!

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ:

### **1. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ RouteService:**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏ –∏–∑ API —Ç–∞—Ä–∏—Ñ–æ–≤
static async getAllLocations(): Promise<LocationData[]> {
  const response = await api.get<ApiResponse<LocationData[]>>('/admin/tariffs/locations')
  return response.data.data || []
}

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ API —Ç–∞—Ä–∏—Ñ–æ–≤
static async getAllRoutes(): Promise<RouteData[]> {
  const response = await api.get<ApiResponse<RouteData[]>>('/admin/tariffs/routes')
  return response.data.data || []
}
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ö—É–∫–∏ –≤ useRoutes:**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏
export function useAllLocations() {
  return useQuery({
    queryKey: routeKeys.locations(),
    queryFn: RouteService.getAllLocations,
    staleTime: 10 * 60 * 1000, // 10 minutes
    cacheTime: 30 * 60 * 1000, // 30 minutes
  })
}

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
export function useAllRoutes() {
  return useQuery({
    queryKey: routeKeys.allRoutes(),
    queryFn: RouteService.getAllRoutes,
    staleTime: 5 * 60 * 1000, // 5 minutes
    cacheTime: 15 * 60 * 1000, // 15 minutes
  })
}
```

### **3. –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç RouteSelection:**

#### **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// ‚úÖ –°–¢–ê–õ–û: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
const { data: allLocations, isLoading: locationsLoading, error: locationsError } = useAllLocations()

// –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –ª–æ–∫–∞—Ü–∏–π
const fromLocations = useMemo(() => {
  if (!allLocations) return []
  
  const locations = allLocations.map(loc => ({
    value: loc.name,
    label: `${getLocationTypeIcon(loc.type)} ${loc.name}`,
    type: loc.type
  }))
  
  return [...locations, { value: '–î—Ä—É–≥–æ–µ', label: '–î—Ä—É–≥–æ–µ', type: 'other' }]
}, [allLocations])
```

#### **–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤ –ª–æ–∫–∞—Ü–∏–π:**
```typescript
const getLocationTypeIcon = (type: string) => {
  switch (type) {
    case 'city': return 'üèôÔ∏è'
    case 'airport': return '‚úàÔ∏è'
    case 'station': return 'üöâ'
    case 'attraction': return 'üèõÔ∏è'
    default: return 'üìç'
  }
}
```

#### **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏:**
```typescript
// –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
if (locationsLoading) {
  return <LoadingScreen />
}

// –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–∫–∞—Ü–∏–∏
if (locationsError) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50 px-4">
      <div className="text-center">
        <h1 className="text-xl font-semibold text-gray-900 mb-2">
          –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        </h1>
        <p className="text-gray-600 mb-4">
          –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π
        </p>
        <button onClick={() => window.location.reload()} className="btn-primary">
          –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
        </button>
      </div>
    </div>
  )
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**

1. **`/api/admin/tariffs/locations`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 25 –ª–æ–∫–∞—Ü–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤
2. **`/api/admin/tariffs/routes`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 23 –º–∞—Ä—à—Ä—É—Ç–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### **–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:**
`test-route-page.html` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ **25 –ª–æ–∫–∞—Ü–∏–π** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/route`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **–∏–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤ –ª–æ–∫–∞—Ü–∏–π** (üèôÔ∏è –≥–æ—Ä–æ–¥–∞, ‚úàÔ∏è –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã, üöâ —Å—Ç–∞–Ω—Ü–∏–∏, üèõÔ∏è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ç–∏–ø–∞–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ **—Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã `FROM_LOCATIONS` –∏ `TO_LOCATIONS`
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **frontend/src/services/routeService.ts** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `getAllLocations()` –∏ `getAllRoutes()`
2. **frontend/src/hooks/useRoutes.ts** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ö—É–∫–∏ `useAllLocations()` –∏ `useAllRoutes()`
3. **frontend/src/pages/RouteSelection.tsx** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
4. **test-route-page.html** - —Å–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## üéØ –°—Ç–∞—Ç—É—Å: **–ó–ê–í–ï–†–®–ï–ù–û** ‚úÖ

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞. –¢–µ–ø–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `http://localhost:3003/route` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
