# üöó –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

## üéØ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–æ—Ç?

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å:

- üßë **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç** (@transfer_srs_bot) - –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/language`
- üöó **–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç** (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å) - –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/driver`

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –¥–∞–µ—Ç:

- ‚úÖ –†–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –†–∞–∑–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ - –≤–æ–¥–∏—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üì± –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:

```
/newbot
```

### 3. –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

**–ò–º—è –±–æ—Ç–∞ (–ª—é–±–æ–µ):**

```
STC Transfer Driver
```

**Username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ bot):**

```
stc_transfer_driver_bot
```

–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π username, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- `stc_driver_bot`
- `transfer_driver_bot`
- `samarkand_driver_bot`

### 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω

BotFather –≤—ã–¥–∞—Å—Ç —Ç–æ–∫–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```
1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω!** –û–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
/setdescription
```

–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ:

```
üöó –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π STC Transfer

–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —Ä–µ–π—Å–∞–º–∏, –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–µ–∑–¥–æ–∫ –ø—Ä—è–º–æ –∏–∑ Telegram!
```

### 6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é

```
/setmenubutton
```

–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞:

- **Text:** üöó –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è
- **URL:** https://finer-legal-hedgehog.ngrok-free.app/driver

---

## ‚öôÔ∏è –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ backend

### 1. –û–±–Ω–æ–≤–∏—Ç–µ `backend/.env`

–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª —Å –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –±–æ—Ç–æ–º –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω:

```env
# –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç (–¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π)
TELEGRAM_DRIVER_BOT_TOKEN="–í–ê–®_–¢–û–ö–ï–ù_–í–û–î–ò–¢–ï–õ–¨–°–ö–û–ì–û_–ë–û–¢–ê"
TELEGRAM_DRIVER_WEBHOOK_URL="https://finer-legal-hedgehog.ngrok-free.app"
TELEGRAM_DRIVER_WEBAPP_URL="https://finer-legal-hedgehog.ngrok-free.app/driver"
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞

–Ø —Å–æ–∑–¥–∞–º —Ñ–∞–π–ª `backend/src/services/driverTelegramBot.ts` —Å –ª–æ–≥–∏–∫–æ–π –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞.

---

## üîß –®–∞–≥ 3: –ö–æ–¥ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞

–°–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞:

### backend/src/services/driverTelegramBot.ts

```typescript
import TelegramBot from "node-telegram-bot-api";
import { Request, Response, NextFunction } from "express";

export class DriverTelegramBotService {
  private static instance: DriverTelegramBotService;
  private bot: TelegramBot;
  private token: string;

  private constructor() {
    this.token = process.env.TELEGRAM_DRIVER_BOT_TOKEN!;
    if (!this.token || this.token === "YOUR_DRIVER_BOT_TOKEN_HERE") {
      console.warn("‚ö†Ô∏è  TELEGRAM_DRIVER_BOT_TOKEN –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω");
      return;
    }

    // Initialize bot without polling (we'll use webhooks)
    this.bot = new TelegramBot(this.token, { polling: false });

    this.setupWebhook();
    console.log("üöó Driver Telegram Bot Service initialized");
  }

  public static getInstance(): DriverTelegramBotService {
    if (!DriverTelegramBotService.instance) {
      DriverTelegramBotService.instance = new DriverTelegramBotService();
    }
    return DriverTelegramBotService.instance;
  }

  private async setupWebhook() {
    try {
      const webhookUrl = `${process.env.TELEGRAM_DRIVER_WEBHOOK_URL}/webhook/driver`;
      await this.bot.setWebHook(webhookUrl);
      console.log(`üîó Driver webhook set to: ${webhookUrl}`);
    } catch (error) {
      console.error("‚ùå Failed to set driver webhook:", error);
    }
  }

  public handleWebhook(req: Request, res: Response, next: NextFunction) {
    try {
      const update = req.body;

      if (update.message) {
        this.handleMessage(update.message);
      }

      if (update.callback_query) {
        this.handleCallbackQuery(update.callback_query);
      }

      res.status(200).send("OK");
    } catch (error) {
      console.error("‚ùå Driver webhook error:", error);
      next(error);
    }
  }

  private async handleMessage(message: any) {
    const chatId = message.chat.id;
    const text = message.text;

    if (text === "/start") {
      await this.sendWelcomeMessage(chatId);
    }
  }

  private async handleCallbackQuery(callbackQuery: any) {
    const chatId = callbackQuery.message.chat.id;
    // Handle callback queries here
  }

  private async sendWelcomeMessage(chatId: number) {
    const welcomeText = `
üöó –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π STC Transfer!

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:
‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã
‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–∫—É—â–∏–º–∏ —Ä–µ–π—Å–∞–º–∏
‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–µ–∑–¥–æ–∫
‚úÖ –°–≤—è–∑—ã–≤–∞—Ç—å—Å—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è.
    `;

    const keyboard = {
      inline_keyboard: [
        [
          {
            text: "üöó –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è",
            web_app: {
              url:
                process.env.TELEGRAM_DRIVER_WEBAPP_URL ||
                process.env.TELEGRAM_DRIVER_WEBHOOK_URL + "/driver" ||
                "",
            },
          },
        ],
      ],
    };

    try {
      await this.bot.sendMessage(chatId, welcomeText, {
        reply_markup: keyboard,
        parse_mode: "HTML",
      });
    } catch (error) {
      console.error("‚ùå Failed to send driver welcome message:", error);
    }
  }

  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—é –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ
  public async sendNewOrderNotification(
    driverTelegramId: string,
    booking: any
  ) {
    const message = `
üÜï –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!

üìç –ú–∞—Ä—à—Ä—É—Ç: ${booking.from_location} ‚Üí ${booking.to_location}
üë§ –ö–ª–∏–µ–Ω—Ç: ${booking.user?.name || booking.user?.first_name || "–ù–µ —É–∫–∞–∑–∞–Ω–æ"}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${booking.user?.phone || "–ù–µ —É–∫–∞–∑–∞–Ω"}
üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${booking.price} —Å—É–º
üìÖ –í—Ä–µ–º—è –ø–æ–¥–∞—á–∏: ${
      booking.pickup_time
        ? new Date(booking.pickup_time).toLocaleString("ru-RU")
        : "–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ"
    }
${booking.notes ? `üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è: ${booking.notes}` : ""}

‚è∞ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
    `;

    try {
      await this.sendMessage(Number(driverTelegramId), message);
    } catch (error) {
      console.error(
        "‚ùå Failed to send new order notification to driver:",
        error
      );
      throw error;
    }
  }

  // –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—é –æ –Ω–∞—á–∞–ª–µ —Ä–µ–π—Å–∞
  public async sendTripReminderNotification(
    driverTelegramId: string,
    booking: any
  ) {
    const message = `
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ä–µ–π—Å–µ!

üìç –ú–∞—Ä—à—Ä—É—Ç: ${booking.from_location} ‚Üí ${booking.to_location}
üë§ –ö–ª–∏–µ–Ω—Ç: ${booking.user?.name || booking.user?.first_name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${booking.user?.phone}
üïê –í—Ä–µ–º—è –ø–æ–¥–∞—á–∏: ${new Date(booking.pickup_time).toLocaleString("ru-RU")}

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–µ—Ö–∞—Ç—å –≤–æ–≤—Ä–µ–º—è!
    `;

    try {
      await this.sendMessage(Number(driverTelegramId), message);
    } catch (error) {
      console.error("‚ùå Failed to send trip reminder:", error);
    }
  }

  // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞
  public async sendCancellationNotification(
    driverTelegramId: string,
    bookingId: string,
    reason?: string
  ) {
    const message = `
‚ùå –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω

ID –∑–∞–∫–∞–∑–∞: ${bookingId}
${reason ? `–ü—Ä–∏—á–∏–Ω–∞: ${reason}` : ""}

–ó–∞–∫–∞–∑ –±—ã–ª –æ—Ç–º–µ–Ω–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–º –∏–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–º.
    `;

    try {
      await this.sendMessage(Number(driverTelegramId), message);
    } catch (error) {
      console.error(
        "‚ùå Failed to send cancellation notification to driver:",
        error
      );
    }
  }

  // –ü—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  public async sendMessage(
    chatId: number,
    message: string,
    options?: any
  ): Promise<void> {
    try {
      await this.bot.sendMessage(chatId, message, options);
      console.log(`üì§ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–æ–¥–∏—Ç–µ–ª—é ${chatId}`);
    } catch (error) {
      console.error("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—é:", error);
      throw error;
    }
  }
}
```

---

## üîå –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ backend

### –û–±–Ω–æ–≤–∏—Ç–µ `backend/src/index.ts`

–î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞:

```typescript
import { DriverTelegramBotService } from "./services/driverTelegramBot";

// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

// Telegram webhook endpoints
app.use("/webhook", (req, res, next) => {
  // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç
  TelegramBotService.getInstance().handleWebhook(req, res, next);
});

app.use("/webhook/driver", (req, res, next) => {
  // –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç
  DriverTelegramBotService.getInstance().handleWebhook(req, res, next);
});

// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

// Initialize Telegram Bot Services
const telegramBot = TelegramBotService.getInstance();
const driverTelegramBot = DriverTelegramBotService.getInstance();
```

---

## üß™ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
cd backend
npm run dev
```

### 2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω

```bash
ngrok http --domain=finer-legal-hedgehog.ngrok-free.app 3001
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram

–ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@stc_transfer_driver_bot`)

### 4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π.

### 5. –ù–∞–∂–º–∏—Ç–µ "üöó –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è"

–î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –¥–≤—É–º—è –±–æ—Ç–∞–º–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Telegram Bots                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                         ‚îÇ
‚îÇ  üßë –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç                      ‚îÇ
‚îÇ  @transfer_srs_bot                      ‚îÇ
‚îÇ  ‚Üí /language (–≤—ã–±–æ—Ä —è–∑—ã–∫–∞, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  üöó –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç                    ‚îÇ
‚îÇ  @stc_transfer_driver_bot               ‚îÇ
‚îÇ  ‚Üí /driver (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Å–∞–º–∏)         ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  ngrok (HTTPS)   ‚îÇ
        ‚îÇ  finer-legal-    ‚îÇ
        ‚îÇ  hedgehog        ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Backend :3001   ‚îÇ
        ‚îÇ  - /webhook      ‚îÇ
        ‚îÇ  - /webhook/driver‚îÇ
        ‚îÇ  - Proxy         ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Frontend :3003  ‚îÇ
        ‚îÇ  - /language     ‚îÇ
        ‚îÇ  - /driver       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É Telegram ID

–í –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:

```typescript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ driver
const { user } = useTelegramWebApp();

useEffect(() => {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç—Ç–æ—Ç Telegram ID –µ—Å—Ç—å –≤ –±–∞–∑–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π
  const checkDriver = async () => {
    try {
      const response = await fetch(`/api/drivers/telegram/${user?.id}`);
      if (!response.ok) {
        // –≠—Ç–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–æ–¥–∏—Ç–µ–ª–µ–º
        webApp?.showAlert("–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é");
        webApp?.close();
      }
    } catch (error) {
      console.error("Error checking driver:", error);
    }
  };

  if (user?.id) {
    checkDriver();
  }
}, [user]);
```

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–π checklist

- [ ] –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
- [ ] –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `backend/.env` —Å —Ç–æ–∫–µ–Ω–æ–º –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞
- [ ] –°–æ–∑–¥–∞–Ω `backend/src/services/driverTelegramBot.ts`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `backend/src/index.ts` —Å webhook –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è
- [ ] Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] ngrok –∑–∞–ø—É—â–µ–Ω
- [ ] –ë–æ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∫–æ–º–∞–Ω–¥–æ–π `/start`
- [ ] Web App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –¥–≤–∞ –±–æ—Ç–∞:

1. **@transfer_srs_bot** (–∫–ª–∏–µ–Ω—Ç—ã) ‚Üí `/language`
2. **@stc_transfer_driver_bot** (–≤–æ–¥–∏—Ç–µ–ª–∏) ‚Üí `/driver`

**–ö–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å!** ‚úÖ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π (`/stats`, `/today`, `/help`)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- –î–æ–±–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ inline –∫–Ω–æ–ø–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

---

**–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞! üöó‚ú®**
