# –û—Ç–ª–∞–¥–∫–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏

## –ü—Ä–æ–±–ª–µ–º–∞: Web App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –≤–º–µ—Å—Ç–æ –≤—ã–±–æ—Ä–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

### –®–∞–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

#### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –≤ –±–æ—Ç–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend:

```bash
cd backend
npm run dev
# –∏–ª–∏
tail -f logs/backend.log
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:

```
üåê Sending Web App URL: https://your-url.com?lang=ru
üåê Language: ru
‚úÖ Welcome message sent successfully
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** URL –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `?lang=ru` (–∏–ª–∏ en/uz)

#### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ Web App –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (–æ–±—ã—á–Ω–æ F12):

```
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ó–∞–∫–∞–∑–∞—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä" –≤ –±–æ—Ç–µ
2. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

‚úÖ Language set from URL in RootRedirect: ru
‚úÖ Language found in localStorage: ru
‚úÖ Redirecting to /vehicles with language: ru
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**

```
‚ùå No language found, redirecting to /language
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `lang` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω –∏–ª–∏ –Ω–µ —Å—á–∏—Ç–∞–Ω.

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

–í Telegram Web App –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ URL (–º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞):

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:**

```
https://your-domain.com/?lang=ru#/
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞):**

```
https://your-domain.com/#/
```

#### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ñ–∞–π–ª–µ `backend/.env` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:

```bash
TELEGRAM_WEBAPP_URL=https://your-domain.com
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
cd backend
cat .env | grep TELEGRAM_WEBAPP_URL
```

#### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ localStorage

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
localStorage.getItem("language");
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `"ru"` –∏–ª–∏ `"en"` –∏–ª–∏ `"uz"`

#### 6. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ localStorage

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
localStorage.clear();
// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:

#### –ü—Ä–∏—á–∏–Ω–∞ 1: TELEGRAM_WEBAPP_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –í backend/.env –¥–æ–±–∞–≤—å—Ç–µ:
TELEGRAM_WEBAPP_URL=https://your-actual-domain.com
```

#### –ü—Ä–∏—á–∏–Ω–∞ 2: URL –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–µ—Ä—è–µ—Ç—Å—è

Telegram –∏–Ω–æ–≥–¥–∞ —É–¥–∞–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL. **–†–µ—à–µ–Ω–∏–µ:**

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ hash-based routing –≤–º–µ—Å—Ç–æ query parameters
- –ò–õ–ò —Ö—Ä–∞–Ω–∏—Ç–µ —è–∑—ã–∫ –≤ Telegram.WebApp.initData

#### –ü—Ä–∏—á–∏–Ω–∞ 3: –ü–∞—Ä–∞–º–µ—Ç—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

```
https://domain.com/#/?lang=ru
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**

```
https://domain.com/?lang=ru#/
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Ä—è—é—Ç—Å—è)

–ï—Å–ª–∏ Telegram —É–¥–∞–ª—è–µ—Ç query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hash:

#### –í –±–æ—Ç–µ (telegramBot.ts):

```typescript
const urlWithLang = `${webAppUrl}#lang=${language}`;
```

#### –í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (AppRoutes.tsx):

```typescript
// –í–º–µ—Å—Ç–æ URLSearchParams
const hash = location.hash.substring(1); // –£–±–∏—Ä–∞–µ–º #
const langParam = hash.startsWith("lang=") ? hash.substring(5, 7) : null;
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:5173/?lang=ru
```

–î–æ–ª–∂–Ω–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/vehicles`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ngrok

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ ngrok –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok
ngrok http 5173

# 2. –û–±–Ω–æ–≤–∏—Ç–µ TELEGRAM_WEBAPP_URL –≤ backend/.env
TELEGRAM_WEBAPP_URL=https://your-ngrok-url.ngrok.io

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
cd backend
npm run dev

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ location
console.log("URL:", window.location.href);
console.log("Search:", window.location.search);
console.log(
  "Lang param:",
  new URLSearchParams(window.location.search).get("lang")
);
console.log("LocalStorage:", localStorage.getItem("language"));
```

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–£–¥–∞–ª–∏—Ç–µ –±–æ—Ç–∞ –∏–∑ Telegram** –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–Ω–æ–≤–∞
2. **–û—á–∏—Å—Ç–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ** –≤ DevTools ‚Üí Application ‚Üí Clear site data
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å** –≤ DevTools ‚Üí Network –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Web App
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç** –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Å–æ–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

1. –õ–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –õ–æ–≥–∏ –∏–∑ backend
3. –ó–Ω–∞—á–µ–Ω–∏–µ `process.env.TELEGRAM_WEBAPP_URL`
4. URL, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç–µ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
5. –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π
