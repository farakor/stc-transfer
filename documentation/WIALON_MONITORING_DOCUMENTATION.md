# üöå –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ Wialon

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Wialon SDK, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è STC Transfer.

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- üó∫Ô∏è **–ö–∞—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–û–±–∑–æ—Ä" –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- üìç **6+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤** —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —Å GPS –ø–æ–∑–∏—Ü–∏—è–º–∏
- üîÑ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- üéØ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –æ—à–∏–±–æ–∫ —Å–µ—Å—Å–∏–π

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **Frontend (React + TypeScript)**

```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ VehicleTrackingMapJsonp.tsx     # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ wialonJsonpService.ts           # JSONP —Å–µ—Ä–≤–∏—Å –¥–ª—è Wialon API
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ wialon.config.ts               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ pages/admin/
    ‚îî‚îÄ‚îÄ AdminDashboard.tsx             # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```

#### 2. **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫**

- **React 18** - UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Leaflet** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–∞—Ä—Ç
- **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Wialon API** - GPS –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wialon

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–§–∞–π–ª:** `frontend/src/config/wialon.config.ts`

```typescript
export const wialonConfig: WialonConfig = {
  baseUrl: "https://gps.ent-en.com/wialon",
  token:
    "85991e5f06896e98fe3c0bd49d2fe6d825770468546E156C3088DF44EB44163B2A478841",
};

export const defaultMapSettings = {
  refreshInterval: 30, // —Å–µ–∫—É–Ω–¥—ã
  center: [41.2995, 69.2401], // –¢–∞—à–∫–µ–Ω—Ç
  zoom: 10,
};
```

### –ú–µ—Ç–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: JSONP

**–ü—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞:** –û–±—Ö–æ–¥ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```typescript
// –ü—Ä–∏–º–µ—Ä JSONP –∑–∞–ø—Ä–æ—Å–∞
function makeJsonpRequest(service, params, sid) {
  return new Promise((resolve, reject) => {
    const callbackName = "wialonCallback_" + Date.now();
    window[callbackName] = function (data) {
      if (data.error) {
        reject(new Error(`Wialon API Error: ${data.error}`));
      } else {
        resolve(data);
      }
    };

    let url = `https://gps.ent-en.com/wialon/ajax.html?svc=${service}`;
    if (sid) url += `&sid=${sid}`;
    url += `&params=${encodeURIComponent(JSON.stringify(params))}`;
    url += `&callback=${callbackName}`;

    const script = document.createElement("script");
    script.src = url;
    document.head.appendChild(script);
  });
}
```

---

## üîë Wialon API - –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–ú–µ—Ç–æ–¥:** `token/login`

```typescript
const response = await makeJsonpRequest("token/login", {
  token: "YOUR_TOKEN_HERE",
});
const sessionId = response.eid;
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —Å GPS –ø–æ–∑–∏—Ü–∏—è–º–∏

**–ú–µ—Ç–æ–¥:** `core/search_items`
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä:** `flags: 1025`

```typescript
const response = await makeJsonpRequest(
  "core/search_items",
  {
    spec: {
      itemsType: "avl_unit",
      propName: "sys_name",
      propValueMask: "*",
      sortType: "sys_name",
    },
    force: 1,
    flags: 1025, // 0x1 + 0x400 (–±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ + GPS –ø–æ–∑–∏—Ü–∏–∏)
    from: 0,
    to: 0,
  },
  sessionId
);
```

### –§–ª–∞–≥–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

| –§–ª–∞–≥   | –û–ø–∏—Å–∞–Ω–∏–µ                      | –†–µ–∑—É–ª—å—Ç–∞—Ç                 |
| ------ | ----------------------------- | ------------------------- |
| `1`    | –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ                | ‚ùå –ù–µ—Ç GPS –ø–æ–∑–∏—Ü–∏–π        |
| `1024` | –¢–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–∏                | ‚úÖ GPS –ø–æ–∑–∏—Ü–∏–∏            |
| `1025` | –ë–∞–∑–æ–≤—ã–µ + –ø–æ–∑–∏—Ü–∏–∏             | ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**      |
| `1027` | –ë–∞–∑–æ–≤—ã–µ + –ø–æ–∑–∏—Ü–∏–∏ + —Å–æ–æ–±—â–µ–Ω–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç               |
| `2047` | –ú–∞–∫—Å–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö               | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ |

---

## üö® –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. CORS –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to fetch` –ø—Ä–∏ –ø—Ä—è–º—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSONP –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS

### 2. Wialon API Error: 4 (Invalid session)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë—ã—Å—Ç—Ä–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
**–†–µ—à–µ–Ω–∏–µ:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Å re-login
- –û—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ 4
- –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

```typescript
if (error.message.includes("Wialon API Error: 4")) {
  console.log("Session expired, clearing session...");
  this.session = null;
  // Retry logic...
}
```

### 3. Wialon API Error: 1 (Invalid input)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã API
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ hex —Ñ–ª–∞–≥–æ–≤ –Ω–∞ decimal

- `0x1` ‚Üí `1`
- `0x1 | 0x2` ‚Üí `3`

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ GPS –ø–æ–∑–∏—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–≤—Å–µ `pos = undefined`)
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–ª–∞–≥–∞ `1025` –≤–º–µ—Å—Ç–æ `1`

### 5. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ update_data_flags

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–∫–µ–Ω –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### VehiclePosition (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

```typescript
interface VehiclePosition {
  id: string; // ID —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
  name: string; // –ù–∞–∑–≤–∞–Ω–∏–µ
  latitude: number; // –®–∏—Ä–æ—Ç–∞
  longitude: number; // –î–æ–ª–≥–æ—Ç–∞
  speed: number; // –°–∫–æ—Ä–æ—Å—Ç—å –∫–º/—á
  course: number; // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≥—Ä–∞–¥—É—Å—ã)
  timestamp: number; // Unix timestamp
  status: "moving" | "stopped" | "offline"; // –°—Ç–∞—Ç—É—Å
  driver?: string; // –í–æ–¥–∏—Ç–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  fuel?: number; // –¢–æ–ø–ª–∏–≤–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  mileage?: number; // –ü—Ä–æ–±–µ–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

```typescript
let status: "online" | "offline" | "moving" | "stopped" = "offline";

if (pos && now - pos.t < 600) {
  // 10 –º–∏–Ω—É—Ç
  const speed = pos.s || 0;
  status = speed > 5 ? "moving" : "stopped";
}
```

---

## üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã

**–§–∞–π–ª:** `VehicleTrackingMapJsonp.tsx`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –¶–≤–µ—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- Popup —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ú–∞—Ä–∫–µ—Ä—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

```typescript
const createVehicleIcon = (vehicle: VehiclePosition) => {
  const style = vehicleMarkerStyles[vehicle.status];

  return L.divIcon({
    html: `
      <div style="
        background-color: ${style.color};
        width: 20px; height: 20px;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      ">
        <div style="
          width: 8px; height: 8px;
          background-color: white;
          border-radius: 50%;
          margin: 4px;
        "></div>
      </div>
    `,
    iconSize: [20, 20],
    iconAnchor: [10, 10],
  });
};
```

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –º–∞—Ä–∫–µ—Ä–æ–≤

```typescript
export const vehicleMarkerStyles = {
  moving: { color: "#10B981", label: "–í –¥–≤–∏–∂–µ–Ω–∏–∏" }, // –ó–µ–ª–µ–Ω—ã–π
  stopped: { color: "#F59E0B", label: "–û—Å—Ç–∞–Ω–æ–≤–∫–∞" }, // –ñ–µ–ª—Ç—ã–π
  offline: { color: "#EF4444", label: "–û—Ñ—Ñ–ª–∞–π–Ω" }, // –ö—Ä–∞—Å–Ω—ã–π
};
```

---

## üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 30 —Å–µ–∫—É–Ω–¥
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SID
- **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –≤—Å–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞ –∫–∞—Ä—Ç–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry** –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏
- **Graceful degradation** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **`test-position-flags.html`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤ API
2. **`test-map-markers.html`** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –∫–∞—Ä—Ç—ã
3. **`test-without-update.html`** - –¢–µ—Å—Ç –±–µ–∑ update_data_flags
4. **`test-session-diagnostics.html`** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π

### –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –ª–æ–≥–∏:

```javascript
üöå –ü–æ–ª—É—á–µ–Ω–æ –ø–æ–∑–∏—Ü–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: 48
‚úÖ –í–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç: 6
‚ùå –ù—É–ª–µ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (0,0): 42
üìç –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:
  - EMS –õ–µ–≥–∫–æ–≤–æ–π HONGQI: 41.299500, 69.240100
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd frontend
npm install leaflet react-leaflet
npm install @types/leaflet  # –¥–ª—è TypeScript
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. **–û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω** –≤ `wialon.config.ts`
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä** Wialon (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** —Ç–æ–∫–µ–Ω–∞

### –ó–∞–ø—É—Å–∫

```bash
cd frontend
npm run dev
```

–ö–∞—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞: `http://localhost:5173` ‚Üí –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –û–±–∑–æ—Ä

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞:** 48 –µ–¥–∏–Ω–∏—Ü
- **–ê–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å GPS:** ~6-12 –µ–¥–∏–Ω–∏—Ü
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API:** ~200-1000ms
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π:** >95%

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```typescript
const stats = {
  total: 48, // –í—Å–µ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
  online: 6, // –û–Ω–ª–∞–π–Ω (–¥–≤–∏–∂–µ–Ω–∏–µ + –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
  moving: 2, // –í –¥–≤–∏–∂–µ–Ω–∏–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å > 5 –∫–º/—á)
  stopped: 4, // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Å–∫–æ—Ä–æ—Å—Ç—å ‚â§ 5 –∫–º/—á)
  offline: 42, // –û—Ñ—Ñ–ª–∞–π–Ω (>10 –º–∏–Ω –±–µ–∑ —Å–∏–≥–Ω–∞–ª–∞)
};
```

---

## üîÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

1. **üé® UI/UX —É–ª—É—á—à–µ–Ω–∏—è**

   - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –±–æ–ª—å—à–æ–º zoom out
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
   - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

2. **üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

   - –ò—Å—Ç–æ—Ä–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –û—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–±–µ–≥—É
   - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Å—Ç–æ–µ–≤

3. **üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª–æ–º–∫–∞—Ö
   - –ì–µ–æ–∑–æ–Ω—ã –∏ –∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏—è

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (1-3 –º–µ—Å—è—Ü–∞)

1. **üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**

   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –∫–∞—Ä—Ç—ã
   - Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

2. **üîÑ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

   - WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   - Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π

3. **üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –î–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (3-12 –º–µ—Å—è—Ü–µ–≤)

1. **ü§ñ –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**

   - –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø–æ–ª–æ–º–æ–∫
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –ê–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

2. **üåç –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤
   - –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - API –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ï–∂–µ–º–µ—Å—è—á–Ω–æ

- üîÑ –†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîç –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

- üÜô –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- üöÄ –î–µ–ø–ª–æ–π –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**

- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ Wialon API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- –û—à–∏–±–∫–∏ JavaScript –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç—ã

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Wialon API:** https://sdk.wialon.com/wiki/en/
- **Leaflet:** https://leafletjs.com/reference.html
- **React Leaflet:** https://react-leaflet.js.org/

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Wialon —Ñ–ª–∞–≥–∏:** https://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/core/search_items
- **JSONP –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://en.wikipedia.org/wiki/JSONP
- **TypeScript:** https://www.typescriptlang.org/docs/

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- ‚úÖ **–ö–∞—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —Å GPS –ø–æ–∑–∏—Ü–∏—è–º–∏
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ Wialon —á–µ—Ä–µ–∑ JSONP
- ‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é!** üöåüìç

---

_–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: $(date)_  
_–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã: 1.0.0_  
_–°—Ç–∞—Ç—É—Å: Production Ready ‚úÖ_

