# üìä –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è STC Transfer

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–µ—Ä–≤–µ—Ä

- **–û–°**: Ubuntu 24.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ Ubuntu 22.04 LTS
- **CPU**: 1 vCPU (2 —è–¥—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **RAM**: 2 GB (4 GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–î–∏—Å–∫**: 20 GB SSD (50 GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–°–µ—Ç—å**: 100 Mbps (1 Gbps —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **IP**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –∞–¥—Ä–µ—Å

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

- **Node.js**: 20.x LTS
- **PostgreSQL**: 14+ (16 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **Nginx**: 1.24+
- **PM2**: 5.x
- **Git**: 2.x

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –î–ª—è –º–∞–ª–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (–¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)

- **CPU**: 2 vCPU
- **RAM**: 4 GB
- **–î–∏—Å–∫**: 50 GB SSD
- **Bandwidth**: 500 GB/–º–µ—Å—è—Ü

### –î–ª—è —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (100-1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)

- **CPU**: 4 vCPU
- **RAM**: 8 GB
- **–î–∏—Å–∫**: 100 GB SSD
- **Bandwidth**: 2 TB/–º–µ—Å—è—Ü

### –î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)

- **CPU**: 8+ vCPU
- **RAM**: 16+ GB
- **–î–∏—Å–∫**: 200+ GB SSD
- **Bandwidth**: 5+ TB/–º–µ—Å—è—Ü
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: Load Balancer, Database Replication

---

## –û—Ü–µ–Ω–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### Backend (Node.js + Express)

- **RAM**: ~200-300 MB –Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å
- **CPU**: –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ 10-30%
- **–ò–Ω—Å—Ç–∞–Ω—Å—ã PM2**: 2-4 (–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º)

### Frontend (Static Files)

- **–†–∞–∑–º–µ—Ä**: ~10-20 MB
- **Nginx**: ~10-20 MB RAM

### PostgreSQL

- **RAM**: 256 MB - 2 GB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏)
- **–î–∏—Å–∫**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–æ–≤
  - 1000 –∑–∞–∫–∞–∑–æ–≤ ‚âà 1-2 MB
  - 100,000 –∑–∞–∫–∞–∑–æ–≤ ‚âà 100-200 MB

### WebSocket (Socket.IO)

- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è**: ~1 MB RAM –Ω–∞ 100 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Bandwidth**: ~1 KB/—Å–µ–∫ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

---

## –û—Ü–µ–Ω–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

### –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```
/home/stc/apps/stc-transfer/
‚îú‚îÄ‚îÄ backend/               ~500 MB (node_modules)
‚îú‚îÄ‚îÄ frontend/              ~300 MB (node_modules)
‚îî‚îÄ‚îÄ logs/                  ~100 MB/–º–µ—Å—è—Ü (—Å —Ä–æ—Ç–∞—Ü–∏–µ–π)

–ò—Ç–æ–≥–æ: ~1 GB
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```
PostgreSQL:
- –ü—É—Å—Ç–∞—è –ë–î:              ~10 MB
- 1,000 –∑–∞–∫–∞–∑–æ–≤:          ~2 MB
- 10,000 –∑–∞–∫–∞–∑–æ–≤:         ~20 MB
- 100,000 –∑–∞–∫–∞–∑–æ–≤:        ~200 MB

–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ (compressed):
- 1 –±—ç–∫–∞–ø:                ~1-5 MB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∞–Ω–Ω—ã—Ö)
- 30 –¥–Ω–µ–π –±—ç–∫–∞–ø–æ–≤:        ~30-150 MB
```

### –õ–æ–≥–∏

```
Application logs:         ~10-50 MB/–º–µ—Å—è—Ü
Nginx logs:               ~50-200 MB/–º–µ—Å—è—Ü
PostgreSQL logs:          ~10-50 MB/–º–µ—Å—è—Ü

–° —Ä–æ—Ç–∞—Ü–∏–µ–π (30 –¥–Ω–µ–π):     ~200-500 MB
```

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Backend API

- **Throughput**: ~1000 req/sec (–Ω–∞ 2 vCPU)
- **Response time**:
  - GET –∑–∞–ø—Ä–æ—Å—ã: 10-50 ms
  - POST –∑–∞–ø—Ä–æ—Å—ã: 50-200 ms
  - Database queries: 10-100 ms

### WebSocket

- **Concurrent connections**: ~10,000 (–Ω–∞ 4 GB RAM)
- **Message latency**: <100 ms

### Database

- **Queries/sec**: ~500-1000 (–ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- **Connection pool**: 10-20 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## –°–µ—Ç–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Bandwidth

- **Backend API**: ~1 KB/–∑–∞–ø—Ä–æ—Å
- **Frontend**: ~1-2 MB –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, ~50-100 KB –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ
- **WebSocket**: ~1-5 KB/—Å–µ–∫ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **Telegram Bot**: ~10-50 KB/—Å–æ–æ–±—â–µ–Ω–∏–µ

### –û—Ü–µ–Ω–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

```
100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å:
- API –∑–∞–ø—Ä–æ—Å—ã:            ~50 MB/–¥–µ–Ω—å
- WebSocket:              ~100 MB/–¥–µ–Ω—å
- Frontend:               ~200 MB/–¥–µ–Ω—å
- Telegram:               ~50 MB/–¥–µ–Ω—å
–ò—Ç–æ–≥–æ:                    ~400 MB/–¥–µ–Ω—å (~12 GB/–º–µ—Å—è—Ü)

1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å:  ~120 GB/–º–µ—Å—è—Ü
10000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å: ~1.2 TB/–º–µ—Å—è—Ü
```

### –ü–æ—Ä—Ç—ã

- **80**: HTTP (redirect to HTTPS)
- **443**: HTTPS (Nginx)
- **3001**: Backend (internal, localhost only)
- **5432**: PostgreSQL (internal, localhost only)

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±–ª–∞—á–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º

### DigitalOcean Droplets

- **Basic**: $24/–º–µ—Å (2 vCPU, 4 GB RAM, 80 GB SSD) ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **Standard**: $48/–º–µ—Å (2 vCPU, 8 GB RAM, 160 GB SSD)
- **Premium**: $96/–º–µ—Å (4 vCPU, 16 GB RAM, 320 GB SSD)

### AWS EC2

- **t3.medium**: ~$30/–º–µ—Å (2 vCPU, 4 GB RAM)
- **t3.large**: ~$60/–º–µ—Å (2 vCPU, 8 GB RAM)
- **m5.large**: ~$70/–º–µ—Å (2 vCPU, 8 GB RAM)

### Hetzner Cloud

- **CPX21**: ‚Ç¨10/–º–µ—Å (3 vCPU, 4 GB RAM, 80 GB SSD) ‚≠ê –õ—É—á—à–∞—è —Ü–µ–Ω–∞
- **CPX31**: ‚Ç¨17/–º–µ—Å (4 vCPU, 8 GB RAM, 160 GB SSD)

### Vultr

- **Regular Performance**: $24/–º–µ—Å (2 vCPU, 4 GB RAM, 80 GB SSD)
- **High Frequency**: $48/–º–µ—Å (2 vCPU, 8 GB RAM, 128 GB NVMe)

### Linode

- **Linode 4GB**: $24/–º–µ—Å (2 vCPU, 4 GB RAM, 80 GB SSD)
- **Linode 8GB**: $48/–º–µ—Å (4 vCPU, 8 GB RAM, 160 GB SSD)

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Backend

```javascript
// ecosystem.config.js
{
  instances: 2,  // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 2-4 –∏–Ω—Å—Ç–∞–Ω—Å–∞
  exec_mode: 'cluster',
  max_memory_restart: '500M'
}
```

### Nginx

```nginx
# –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
location ~* \.(js|css|png|jpg|jpeg|gif|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# Gzip compression
gzip on;
gzip_comp_level 6;
```

### PostgreSQL

```sql
-- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 4 GB RAM
shared_buffers = 1GB
effective_cache_size = 3GB
maintenance_work_mem = 256MB
work_mem = 16MB
```

### PM2

```bash
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
pm2 start ecosystem.config.js --max-memory-restart 500M

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

### CPU

```bash
# –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
top
htop

# –ò—Å—Ç–æ—Ä–∏—è
sar -u 1 10

# PM2
pm2 monit
```

### Memory

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ü–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º
ps aux --sort=-%mem | head

# PM2
pm2 status
```

### Disk

```bash
# –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
du -sh /home/stc/apps/*

# I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
iostat -x 1 10
```

### Network

```bash
# –¢–µ–∫—É—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -an | grep ESTABLISHED | wc -l

# Bandwidth
iftop

# –¢–µ–∫—É—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
nload
```

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤)

1. –£–≤–µ–ª–∏—á–∏—Ç—å RAM –∏ CPU —Å–µ—Ä–≤–µ—Ä–∞
2. –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ PM2 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤)

1. **Load Balancer**: Nginx + –Ω–µ—Å–∫–æ–ª—å–∫–æ backend —Å–µ—Ä–≤–µ—Ä–æ–≤
2. **Database Replication**: Master-Slave PostgreSQL
3. **Redis**: –î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ—Å—Å–∏–π
4. **CDN**: –î–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ frontend

### –ü—Ä–∏–º–µ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

```
Internet
    ‚Üì
Load Balancer (Nginx)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ App 1 ‚îÇ App 2 ‚îÇ App 3 ‚îÇ (Backend Servers)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì           ‚Üì
PostgreSQL   Redis
(Master)     (Cache)
    ‚Üì
PostgreSQL
(Replica)
```

---

## –ß–µ–∫–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] PM2 –≤ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ (2-4 –∏–Ω—Å—Ç–∞–Ω—Å–∞)
- [ ] Nginx gzip compression –≤–∫–ª—é—á–µ–Ω
- [ ] PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ–π RAM
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î

### –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- [ ] –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)

### –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏

- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å RAM/CPU
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å load balancer

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

1. ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
2. ‚úÖ Firewall (UFW)
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î
4. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (PM2, –ª–æ–≥–∏)
5. ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
6. ‚úÖ PM2 –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
2. Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã
3. Monitoring (Prometheus + Grafana)
4. Alerting (email/Telegram –ø—Ä–∏ —Å–±–æ—è—Ö)
5. CDN (Cloudflare)
6. Database replication
7. Automated backups to S3/Object Storage

---

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
pm2 status && free -h && df -h

# –î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit
```
