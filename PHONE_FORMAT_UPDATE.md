# Обновление формата телефона для Узбекистана

## Дата изменений

13 октября 2025

## Описание

Изменен формат номера телефона на странице логина водителя с российского формата на узбекский.

## Изменения

### Frontend - DriverLogin.tsx

**Файл:** `frontend/src/pages/driver/DriverLogin.tsx`

#### Изменен формат телефона:

- **Было:** `+7 (XXX) XXX-XX-XX` (Российская Федерация)
- **Стало:** `+998 (XX) XXX-XX-XX` (Узбекистан)

#### Конкретные изменения:

1. **Функция форматирования (строки 27-38)**

   - Код страны изменен с `+7` на `+998`
   - Формат: `+998 (XX) XXX-XX-XX`
   - Общая длина: 12 цифр (998 + 9 цифр номера)

2. **Валидация длины (строка 49)**

   - Было: `phone.length < 18`
   - Стало: `phone.length < 19`

3. **Placeholder (строка 112)**

   - Было: `"+7 (___) ___-__-__"`
   - Стало: `"+998 (__) ___-__-__"`

4. **Валидация кнопки отправки (строка 128)**
   - Было: `phone.length < 18`
   - Стало: `phone.length < 19`

## Формат узбекских номеров

```
+998 (XX) XXX-XX-XX
```

Где:

- `+998` - код страны Узбекистан
- `XX` - код оператора (например: 90, 91, 93, 94, 95, 97, 98, 99, 33, 71)
- `XXX-XX-XX` - номер абонента (7 цифр)

### Примеры корректных номеров:

- `+998 (90) 123-45-67`
- `+998 (91) 234-56-78`
- `+998 (93) 345-67-89`

## Совместимость с Backend

Backend уже поддерживает универсальную обработку телефонных номеров:

- Удаляет все нецифровые символы
- Пробует разные варианты формата
- Работает как с российскими, так и с узбекскими номерами

**Файл:** `backend/src/controllers/driverController.ts` (строки 22-30)

```typescript
const cleanPhone = phone.replace(/\D/g, ""); // Только цифры
const formattedPhone = `+${cleanPhone}`; // С плюсом

const driver = await prisma.driver.findFirst({
  where: {
    OR: [
      { phone: cleanPhone },
      { phone: formattedPhone },
      { phone: phone }, // Исходный формат
    ],
  },
  // ...
});
```

## Другие компоненты

Проверены следующие компоненты, форматирование не требуется:

- `frontend/src/pages/driver/DriverDashboard.tsx` - отображает телефон как есть
- `frontend/src/pages/admin/DriversManagement.tsx` - уже использует плейсхолдер "+998 90 123 45 67"
- `frontend/src/pages/BookingForm.tsx` - получает данные из Telegram
- Backend контроллеры - универсальная обработка

## Тестирование

Для тестирования:

1. Откройте страницу `/driver/login`
2. Введите номер телефона водителя в формате Узбекистана
3. Убедитесь, что формат автоматически применяется: `+998 (XX) XXX-XX-XX`
4. Проверьте успешную авторизацию

## Статус

✅ Завершено и протестировано
